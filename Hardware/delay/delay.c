//-----------------------------------------------------------------
// ͷ�ļ�����
//-----------------------------------------------------------------
#include "main.h"
//-----------------------------------------------------------------

extern TIM_HandleTypeDef htim2;
//-----------------------------------------------------------------
// void delay_20ns(u32 nns)
//-----------------------------------------------------------------
// 
// ��������: ��ʱ20ns
// ��ڲ���: u32 nns��Ҫ��ʱ��ns��.	
// �� �� ֵ: ��
// ע������: ��nns=1ʱ������������ʱ20ns����ʵ��������ʱ22ns�����Ϊ10%��
//
//-----------------------------------------------------------------
void delay_20ns(uint32_t nns)
{
	do {
			;
	} while (--nns); 
}

//-----------------------------------------------------------------
// void delay_us(u32 nus)
//-----------------------------------------------------------------
// 
// ��������: ��ʱus
// ��ڲ���: u32 nus��Ҫ��ʱ��us��.	
// �� �� ֵ: ��
// ע������: nus:0~190887435(���ֵ��2^32/fac_us@fac_us=22.5)	
//
//-----------------------------------------------------------------
void delay_us(uint32_t nus)
{		
	volatile uint32_t i;
	while(nus--)
	{
		i=FAC_us-2;
		while(i--);
	}
}

void bsp_DelayUS(uint32_t n)
{
	 // 设置计数器初值为0
    __HAL_TIM_SET_COUNTER(&htim2, 0);
    
    // 启动定时器（非中断模式）
    HAL_TIM_Base_Start(&htim2);
    
    // 等待达到目标计数值
    while (__HAL_TIM_GET_COUNTER(&htim2) < n) {
			;
    }
    
    // 停止定时器
    HAL_TIM_Base_Stop(&htim2);
}

//-----------------------------------------------------------------
// void delay_ms(u16 nms)
//-----------------------------------------------------------------
// 
// ��������: ��ʱms
// ��ڲ���: u32 nms��Ҫ��ʱ��ms��
// �� �� ֵ: ��
// ע������: ��
//
//-----------------------------------------------------------------
void delay_ms(uint16_t nms)
{
	uint32_t i;
	for(i=0;i<nms;i++) 
		delay_us(1000);
}
//-----------------------------------------------------------------
// End Of File
//----------------------------------------------------------------- 	 
